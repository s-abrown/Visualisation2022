<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTJ4</title>

    <style>
        svg {
            background-color: whitesmoke;
            margin: 1px solid;
        }
    </style>
</head>
<body>

    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

    <script>
        // window size
        const width = window.innerWidth;
        const height = window.innerHeight;

        const margin = {top: 30, right: 30, bottom: 70, left: 60},
            w = 460 - margin.left - margin.right,
            h = 400 - margin.top - margin.bottom;

        // Link csv file to document
        d3.csv('RTJ4.csv', function(d) {
            return {
                speaker : d.speaker,
                boasting : +d.mentionBoasting,
                person : +d.mentionKillerMike + +d.mentionElP + +d.mentionFamily + +d.mentionOsamaBL + +d.mentionMohammedAli + +d.mentionKurtVonnegut + +d.mentionAynRand + +d.mentionDonaldTrump + +d.mentionToussainLouverture + +d.mentionNapoleonBonaparte + +d.mentionMalcolmX + +d.mentionMLK + +d.mentionJimmySavile + +d.mentionNoamChomsky + +d.mentionCharlesBukowski + +d.mentionDickGregory,
                feeling : +d.mentionBoasting + +d.mentionDisillusion + +d.mentionThreatening + +d.mentionAnguish + +d.mentionExistentialism,
                place : +d.mentonBrooklyn + +d.mentionNewYork + +d.mentionMiami + +d.mentionAtlanta + +d.mentionGuantanamo,
                state : +d.mentionPoverty + +d.mentionEducation + +d.mentionWealth,
                object : +d.mentionCar + +d.mentionMoney + +d.mentionWeapon + +d.mentionSocialMedia,
                action : +d.mentionWork + +d.mentionCrime,
                substanceUse : +d.mentionDrugs + +d.mentionAlcohol + +d.mentionTobacco,
                trackNumber : +d.trackNumber,

            }
        }).then(data => {
          let canvas2 = d3.select('body')
                .append('svg')
                .attr('width', width - 40)
                .attr('height', height - 40)

          // label of rows and columns
          var myGroups = ["Song 1", "Song 2", "Song 3", "Song 4", "Song 5", "Song 6", "Song 7", "Song 8", "Song 9", "Song 10", "Song 11"]
          var myVars = ["v1", "v2", "v3", "v4", "v5", "v6", "v7", "v8", "v9", "v10"]

          // Build X scales and axis:
          var x = d3.scaleBand()
            .range([ 0, width ])
            .domain(myGroups)
            .padding(0.01);
          canvas2.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x))

          // Build Y scales and axis:
          var y = d3.scaleBand()
            .range([ height, 0 ])
            .domain(myVars)
            .padding(0.01);
          canvas2.append("g")
            .call(d3.axisLeft(y));

            // Colour for boxes
            var myColour = d3.scaleLinear()
              .range(["#f5cef5", "#e81ce8"])
              .domain([0, 20])



          // add the squares
          for(let i=0 ; i< 3 ; i++){
            canvas2.selectAll()
              .data(data.filter(function(d){ 
                console.log(d)
                return d.speaker == "killerMike" }))
              .enter()
              .append("rect")
                .attr("x", d => d.trackNumber * (22))
                .attr("y", 2 + (i * 22))
                .attr("width", 20)
                .attr("height", 20)
                .style("fill", d => {
                  //mention boasting
                  if(i == 0){
                     return myColour(+d.boasting)
                  }
                })
                // mention killer mike
                
          }


 

 

})




    </script>
    
</body>
</html>


</script>